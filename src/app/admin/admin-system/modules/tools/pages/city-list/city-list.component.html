<section class="grid-section">
  <div class="top-section my-4">
    <div class="title">
      <h4 class="fw-bold">{{ 'cities' | translate }}</h4>
    </div>
  </div>

  <div class="bottom-section">
    <dx-data-grid
      #grid
      [dataSource]="cities"
      [columnAutoWidth]="true"
      [columnHidingEnabled]="true"
      [allowColumnReordering]="true"
      [rowAlternationEnabled]="true"
      [showBorders]="true"
      [remoteOperations]="false"
      id="gridContainer"
      [width]="'100%'"
      (onRowInserted)="onRowInserted($event)"
      (onRowUpdated)="onRowUpdated($event)"
      (onRowRemoving)="onRowRemoving($event)"
      (onContentReady)="contentReady($event)"
    >
      <!-- âœ… Editing config -->
      <dxo-editing
        mode="row"
        [allowUpdating]="true"
        [allowAdding]="true"
        [allowDeleting]="true"
        [useIcons]="true"
      ></dxo-editing>

  <dxo-toolbar>
      <dxi-item
      *ngIf="permission.has(permissions.cityCreate)"
        location="before"
        widget="dxButton"
        [options]="addButtonOptions"
    ></dxi-item>
    <dxi-item name="searchPanel"></dxi-item>
  </dxo-toolbar>

      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager
        [visible]="true"
        [showPageSizeSelector]="true"
        [allowedPageSizes]="[10, 25, 50, 100]"
      ></dxo-pager>

      <dxi-column
        [allowEditing]="false"
        dataField="id"
        caption="{{ 'id' | translate }}"
        alignment="left"
      ></dxi-column>

      <dxi-column
        dataField="name"
        caption="{{ 'name' | translate }}"
        dataType="string"
      ></dxi-column>

      <!-- âœ… Command column for edit/delete icons -->
      <dxi-column type="buttons" [width]="100" *ngIf="permission.hasAny([permissions.cityUpdate, permissions.cityDelete])">
        <dxi-button name="edit" *ngIf="permission.has(permissions.cityUpdate)"></dxi-button>
        <dxi-button name="delete" *ngIf="permission.has(permissions.cityDelete)"></dxi-button>
      </dxi-column>

      <dxo-search-panel
        [visible]="true"
        [highlightCaseSensitive]="true"
        [placeholder]="'search' | translate"
      ></dxo-search-panel>
    </dx-data-grid>
  </div>
</section>
