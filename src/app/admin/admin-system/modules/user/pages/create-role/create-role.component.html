<section class="right-column mt-4 ">
    <h5 class="fw-bold mb-3">{{ mainTitle | translate}}</h5>
    <div class="row bg-white  rounded-2">
        <div class="col-lg-4">
            <div class="left-info mt-3">
                <div class="header px-3 py-2 fw-bold">
                    {{'permissionInfo' | translate}}
                </div>
                <div class="main ">
                    <div class="panel py-2 position-relative ms-2"><span class="ms-2 fw-bold">{{'general' | translate}}</span></div>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
             <div class="box px-3 shadow-none ">
                        <div class="box-header">
                            <h5 class="fw-bold active-title-underline position-relative">{{ 'general' | translate }}</h5>  
                        </div>
                        <div class="box-body">
                            <form [formGroup]="roleForm">
                            <div class="form-group">
                            <div class="form-name mb-2">
                                  <label for="name" class="text-left">
                                          {{ 'name' | translate }}
                                    <span class="text-red">*</span>
                                  </label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    class="form-control"
                                    formControlName="name"
                                    [ngClass]="{'has-error': roleForm.get('name')?.touched && roleForm.get('name')?.invalid}"
                                >
                                 <p class="error-message" *ngIf="roleForm.get('name')?.touched && roleForm.get('name')?.invalid"> 
                                    {{ 'emptyInputError' | translate }}
                                </p>
                            </div>
                            <div class="form-group mb-2">
                                <label for="meta-description" class="text-left">
                                    {{ 'description' | translate }}
                                    <span class="text-red">*</span>
                                </label>
                                <textarea 
                                    class="meta-description form-control w-100" 
                                    style="height: 130px;" 
                                    id="description"
                                    formControlName="description"
                                    [ngClass]="{'has-error': roleForm.get('description')?.touched && roleForm.get('description')?.invalid}"
                                ></textarea>
                                <p class="error-message" *ngIf="roleForm.get('description')?.touched && roleForm.get('description')?.invalid"> 
                                    {{ 'emptyInputError' | translate }}
                                </p>
                            </div>
                            <div class="form-permission mb-2">
                                <label class="text-left">
                                        {{ 'permissions' | translate }}
                                        <span class="text-red">*</span>
                                </label>
                        <dx-data-grid
                        #grid
                        [columnAutoWidth]="false"
                        [columnHidingEnabled]="false"
                        id="gridContainer"
                        [dataSource]="permissions"
                        [remoteOperations]="false"
                        [allowColumnReordering]="true"
                        [rowAlternationEnabled]="true"
                        [showBorders]="true"
                        keyExpr="id"
                        [width]="'100%'"
                        (onContentReady)="contentReady($event)"
                        [selection]="{ mode: 'multiple', showCheckBoxesMode: 'always' }"
                        (onSelectionChanged)="onSelectionChanged($event)"
                        >
                        <dxo-toolbar>
                            <!-- Search Panel -->
                            <dxi-item name="searchPanel"></dxi-item>
                        </dxo-toolbar>
                        <dxo-selection mode="multiple"></dxo-selection>
                        <dxo-paging [pageSize]="10"></dxo-paging>
                        <dxo-pager
                            [visible]="true"
                            [showPageSizeSelector]="true"
                            [allowedPageSizes]="[10, 25, 50, 100]"
                        ></dxo-pager>


                        <dxi-column dataField="name" [width]="'50%'" dataType="string" caption="{{ 'name' | translate }}">
                        </dxi-column>

                        

                        <dxi-column dataField="code" dataType="string" caption="{{ 'code' | translate }}">
                        </dxi-column>

                        <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"  [placeholder]="'search' | translate"></dxo-search-panel>

                        <div *dxTemplate="let d of 'discountCellTemplate'">
                            <div class="chart-cell">
                            <dx-bullet
                                [showTarget]="false"
                                [showZeroLevel]="true"
                                [startScaleValue]="0"
                                [endScaleValue]="100"
                                [value]="d.value * 100"
                            >
                                <dxo-size [width]="150" [height]="35"></dxo-size>
                                <dxo-margin [top]="5" [bottom]="0" [left]="5"></dxo-margin>
                            </dx-bullet>
                            </div>
                        </div>
                        </dx-data-grid>
        </div>                            
            </div>
                <div class="action-btns mt-3 d-flex flex-row">
                        <app-save-edit-toolbar
                        [editMode]="isEdit"
                        entityName="Role"
                        (save)="saveRole()"
                        [invalid]="roleForm.invalid"
                        [loading]="isSaving"
                ></app-save-edit-toolbar>
                <button class="btn btn-secondary align-self-center ms-2" (click)="cancelEdit()">
                    {{ 'cancel' | translate }}
                </button>
                </div>
        </form>
            </div>
                 </div>
        </div>      
    </div>                  
</section>



